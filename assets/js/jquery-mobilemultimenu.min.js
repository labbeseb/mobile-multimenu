!function(a){var b=function(b,c){var d=this;d.btnMenu=b,d.speed=c,d.dataCtnrMenu=d.btnMenu.data("mx3-block"),d.prefixClass="mx3-",d.classActiveAnimHide=d.prefixClass+"hide-animation",d.classActiveLink=d.prefixClass+"active",d.classAnimDuring=d.prefixClass+"anim-during",d.classArrow=d.prefixClass+"arrow",d.classNoLink=d.prefixClass+"no-link",d.classSelected=d.prefixClass+"selected",d.classZeroHeight=d.prefixClass+"red-height",d.allMx3btnMenu=a("."+d.prefixClass+"btn"),d.allCtnrMenu=a("."+d.prefixClass+"container"),d.allLiCtnr=d.allCtnrMenu.find(".lvl1 > li"),d.ctnrMenu=a(".mx3-container#"+d.dataCtnrMenu),d.mainList=d.ctnrMenu.children("ul"),d.liCtnr=d.mainList.children("li"),d.subMenus=d.ctnrMenu.find("ul ul"),d.itemClick=d.liCtnr.children("a"),d.linksSubLvl=d.mainList.find("ul > li > a"),d.nbItems=d.liCtnr.length,d.heightItems=100/d.nbItems+"%",d.pictoArrow='<span class="'+d.classArrow+'"></span>',d.addActiveAnimHide=function(a){return a.addClass(d.classActiveAnimHide),this},d.addAnimDuring=function(a){return a.addClass(d.classAnimDuring),this},d.addArrows=function(){d.linksSubLvl.each(function(){var b=a(this),c=b.parent("li");1==c.hasClass(d.classNoLink)&&b.append(d.pictoArrow).on("click",function(){a(this).toggleClass(d.classActiveLink)})})},d.addNoLink=function(){return d.liCtnr.each(function(){var b=a(this),c=b.children("ul");c.length>0&&b.addClass(d.classNoLink)}),d.subMenus.children("li").each(function(){var b=a(this),c=b.children("ul");c.length>0&&b.addClass(d.classNoLink)}),this},d.addListLvl=function(){return d.mainList.addClass("lvl1"),d.subMenus.each(function(){var b=a(this).parents("ul").length;a(this).addClass("lvl"+parseInt(b+1))}),this},d.addSelected=function(a){return a.addClass(d.classSelected),this},d.collapseMenu=function(){return d.itemClick.on("click",function(){var b=a(this),c=b.parent("li"),e=c.children("ul");return e.length>0?(c.hasClass(d.classSelected)&&!c.hasClass(d.classAnimDuring)?d.retractAllSubMenus(e).reInit():d.goAnim(b),!1):void 0}),this},d.collapseSubMenu=function(){return d.linksSubLvl.on("click",function(){var b=a(this).siblings("ul");return b.length>0?(b.stop().slideToggle(d.speed),d.retractAllSubMenus(b),b.find("."+d.classNoLink).removeClass(d.classActiveLink),!1):void 0}),this},d.goAnim=function(b){var c=b.parent("li");return d.addSelected(c),d.addAnimDuring(c),window.setTimeout(function(){d.rmAnimDuring(c),d.showSubMenu(c)},2*d.speed),d.liCtnr.each(function(){var b=a(this);b.hasClass(d.classSelected)||(d.addActiveAnimHide(b),window.setTimeout(function(){d.setLiHeight(b,0)},d.speed))}),this},d.hideMenu=function(){return d.btnMenu.removeClass("active"),d.ctnrMenu.hide(),d.reInit(),this},d.init=function(){return d.addListLvl().setLiHeight(d.liCtnr,d.heightItems).toggleMenu(d.btnMenu).collapseMenu().collapseSubMenu().addNoLink().addArrows(),this},d.reInit=function(){d.rmSelected(d.liCtnr).setLiHeight(d.liCtnr,d.heightItems).rmActiveAnimHide(d.liCtnr).liCtnr.children("ul").hide()},d.retractAllSubMenus=function(a){var b=a.find("ul");return b.stop().slideUp(d.speed).siblings("a."+d.classActiveLink).removeClass(d.classActiveLink),this},d.rmActiveAnimHide=function(a){return a.removeClass(d.classActiveAnimHide),this},d.rmAnimDuring=function(a){return a.removeClass(d.classAnimDuring),this},d.rmSelected=function(a){return a.removeClass(d.classSelected),this},d.setLiHeight=function(a,b){return a.css("height",b),this},d.setLiHeightPx=function(a){d.heightItems=a},d.setStartTop=function(a){return d.ctnrMenu.css("top",a),this},d.showMenu=function(){return d.allCtnrMenu.hide(),d.btnMenu.addClass("active"),d.ctnrMenu.fadeIn("fast"),d.reInit(),this},d.showSubMenu=function(a){var b=a.children("ul");return b.stop().slideDown(),this},d.toggleMenu=function(){return b.on("click",function(){d.btnMenu.hasClass("active")&&d.ctnrMenu.is(":visible")?d.hideMenu():(d.allMx3btnMenu.removeClass("active"),d.showMenu())}),this}};a.fn.mx3=function(c){var d={animDelay:300,startTop:0,heightGlobalItem:!1,heightActiveItem:!1},e=a.extend(d,c),f=[];return this.each(function(c){var d=a(this);f[c]=new b(d,e.animDelay),0==isNaN(parseInt(e.heightGlobalItem))&&f[c].setLiHeightPx(e.heightGlobalItem),f[c].init().setStartTop(e.startTop),f[c].itemClick.on("click",function(){var b=a(this).parent("li");0==isNaN(parseInt(e.heightActiveItem))&&1==a(this).parent("li").hasClass(f[c].classSelected)&&window.setTimeout(function(){f[c].setLiHeight(b,e.heightActiveItem)},f[c].speed)})})}}(jQuery);